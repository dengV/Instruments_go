
为了实现值语义，上述代码需要在某些时候复制数组的底层存储，以允许两个数组实例拥有不 同的元素。对于简单值类型 (像是 Int 或 CGPoint) 来说，整个值直接存储在一个变量中，当初始化一个新变量，或是将新值赋给已经存在的变量时，复制都会自动发生。

然而，将一个数组赋给新变量并不会发生底层存储的复制，这只会创建一个新的引用，它指向 同一块在堆上分配的缓冲区，所以该操作将在常数时间内完成。直到指向共享存储的变量中有 一个值被更改了 (例如:进行 insert 操作)，这时才会发生真正的复制。不过要注意的是，只有 在改变时底层存储是共享的情况下，才会发生复制存储的操作。如果数组对它自身存储所持有 的引用是唯一的，那么直接修改存储缓冲区也是安全的。


<hr>

<hr>
